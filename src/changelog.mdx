import { Version } from "./map-interface/components/docs";

<Version spec="4.1.0" date="February 1, 2023" />

- Load the map info box from URL parameters, allowing map locations to be easily shared.
  Locations take the form of `https://macrostrat.org/map/loc/{lon}/{lat}`.
  Optional hash parameters can provide view orientation, layer, and map filter state
  Here's an example from the [Black Canyon of the Gunnison](/loc/-107.7083/38.5802#x=-107.8909&y=38.7058&z=8.73km&a=132&e=76&show=satellite,geology).
- Added a "copy link" button to the map info box, allowing the current location to be saved.
- Correctly save filter states from URL parameters.

Added an "Age refinement" panel to show relative age precision improvement
using the Macrostrat age model.

### New map controls

- Added a scale bar
- Fixed the location tracking control (which shows the user's location)

Update [xDD](https://xdd.wisc.edu) publications views to use the newer snippets API.

### Map settings

Added a new settings panel to control map display options.

- Added a control to toggle text labels on the map
- Show and hide map labels.
- Dark mode

- Yarn "Plug-n-Play" for quicker and more repeatable compilation
- Updated key dependencies, including Webpack, Mapbox GL JS, React, and BlueprintJS.
- Incorporated numerous updates to Macrostrat shared libraries
- Greatly simplified the internal tracking of map layers and filter state
- Decoupled different interactions in the map view

### Experimental line symbols

<Version spec="4.0.0" date="July 6, 2022" />

The 4.0 series represents the first major update to the Macrostrat web interface
since 2018. It is the first major version of Macrostrat's web visualization
components that is an evolution of the codebase rather than a complete rewrite.
The 4.0 milestone simplifies, modernizes, and modularizes this application to
allow a more collaborative development process.

Future iterations in the 4.0 series will add functionality such as
stratigraphic columns, paleogeography, geochemical data
holdings, and more.

This update was produced by Macrostrat technical lead [Daven Quinn](https://davenquinn.com)
and research software engineer [Casey Idzikowski](https://caseyidzikowski.com).

### User-facing changes

- Add a globe-based map projection and an oblique map
  view with 3D terrain (thanks [Mapbox](https://www.mapbox.com/)!)
- Removed [Material UI](https://material-ui.com/) in favor of [Blueprint](https://blueprintjs.com/)
- Make panels simpler and more information-dense
- Store oblique camera positions in hash string
- Numerous bug fixes for filtering map data
- In info panel, expand all sections by default, and improve scrolling through them
  to offset

### Internal changes

- Convert codebase to Typescript from Javascript
- Start converting JSX to hyperscript
- Update React code to use functional components and hooks
- Improve handling of query strings
- Much better state management system and more consistent action handling
