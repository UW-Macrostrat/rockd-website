.map-page
  height 100vh
  /* mobile viewport bug fix */
  height: -webkit-fill-available;
  width 100vw
  display flex
  flex-direction column
  position relative



.main-ui
  flex 1
  position: relative
  display flex
  flex-direction: column
  max-height 100%

.panels-overlay
  position absolute
  top 20px
  left 20px
  right 20px
  bottom 30px
  z-index 100
  // Make sure we can still click
  // on map in background
  pointer-events none
  &.searching
    pointer-events: all

:global(.bp3-panel-stack-view)
  position: relative;
  overflow: unset

.context-stack
  display: flex
  flex-direction: column
  &>div
    flex 1
  &>.searchbar
    flex 0

// Rename left-stack to context-stack
.left-stack
  max-width 34em
  min-width 14em
  // height 100vh
  position absolute
  top 0
  bottom 0
  display: flex
  flex-direction: row
  .spacer
    width 1px
  .panel-container > *
    transition width 300ms

.panel-container
  display flex
  flex-direction: column
  &>div
    pointer-events all

.panel-title
  font-size 16px



.spacer
  flex-grow 1
  pointer-events: none

.map-view-container
  flex-grow 1
  position: relative

.infodrawer-container
  max-height: 60%

.searchbar-holder
  margin-bottom 0.5em

:global
  #map {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 100%;
  }


// Mobile-first styling
@media only screen and (max-width: 768px)
  /* For mobile phones, we want to make the most of screen space... */

  // Move the search bar and context panel to the bottom of the screen
  .context-stack
    display flex
    order 1
    flex-direction: column-reverse
    max-height: 80%

  .main-ui.detail-panel-open .searchbar
    display none

@media screen and (min-width: 768px)
  .infodrawer-container
    width 30em
    position absolute
    right 0px
    top 0px
    bottom: 0px
    pointer-events none
    display flex
    flex-direction column

  // .map-holder
  //   z-index: 1;
  //   position: absolute;
  //   top 0
  //   left 0
  //   bottom 0
  //   right 0
  //   height 100%

